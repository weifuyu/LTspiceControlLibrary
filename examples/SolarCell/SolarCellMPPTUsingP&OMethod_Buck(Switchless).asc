Version 4
SHEET 1 2512 1924
WIRE 304 720 240 720
WIRE 688 720 304 720
WIRE 768 720 752 720
WIRE 800 720 768 720
WIRE 880 720 864 720
WIRE 1056 720 880 720
WIRE 1168 720 1104 720
WIRE 1328 720 1248 720
WIRE 752 752 752 720
WIRE 1056 752 1056 720
WIRE 1104 752 1104 720
WIRE 1328 752 1328 720
WIRE 240 768 240 720
WIRE 688 768 688 720
WIRE 704 768 688 768
WIRE 880 768 880 720
WIRE 704 816 688 816
WIRE 1056 848 1056 832
WIRE 1104 848 1104 832
WIRE 1104 848 1056 848
WIRE 240 864 240 848
WIRE 688 864 688 816
WIRE 688 864 240 864
WIRE 752 864 752 832
WIRE 880 864 880 832
WIRE 880 864 752 864
WIRE 1056 864 1056 848
WIRE 1056 864 880 864
WIRE 1328 864 1328 832
WIRE 1328 864 1056 864
WIRE 240 880 240 864
WIRE 1328 880 1328 864
WIRE 336 1056 320 1056
WIRE 544 1056 528 1056
WIRE 688 1056 544 1056
WIRE 720 1056 688 1056
WIRE 800 1056 784 1056
WIRE 816 1056 800 1056
WIRE 944 1056 928 1056
WIRE 976 1056 944 1056
WIRE 800 1072 800 1056
WIRE 368 1104 368 1088
WIRE 368 1104 320 1104
WIRE 544 1104 544 1056
WIRE 688 1104 672 1104
WIRE 752 1104 752 1088
WIRE 752 1104 688 1104
WIRE 944 1104 944 1056
WIRE 944 1104 832 1104
WIRE 576 1152 576 1136
WIRE 800 1152 800 1136
WIRE 800 1152 576 1152
WIRE 976 1232 912 1232
WIRE 1040 1232 976 1232
WIRE 912 1248 912 1232
WIRE 1120 1248 1104 1248
WIRE 1248 1248 1184 1248
WIRE 1280 1248 1248 1248
WIRE 976 1264 976 1232
WIRE 1152 1296 1152 1280
WIRE 1168 1296 1152 1296
WIRE 1248 1296 1248 1248
WIRE 1248 1296 1232 1296
WIRE 352 1360 320 1360
WIRE 448 1360 416 1360
WIRE 480 1360 448 1360
WIRE 672 1360 576 1360
WIRE 784 1360 768 1360
WIRE 848 1360 784 1360
WIRE 928 1360 912 1360
WIRE 1024 1360 992 1360
WIRE 1056 1360 1024 1360
WIRE 1072 1360 1072 1296
WIRE 1072 1360 1056 1360
WIRE 336 1408 320 1408
WIRE 384 1408 384 1392
WIRE 384 1408 336 1408
WIRE 784 1408 784 1360
WIRE 800 1408 784 1408
WIRE 880 1408 880 1392
WIRE 880 1408 864 1408
WIRE 960 1408 960 1392
WIRE 976 1408 960 1408
WIRE 1056 1408 1056 1360
WIRE 1056 1408 1040 1408
WIRE 320 1440 320 1408
FLAG 240 880 0
FLAG 304 720 S_IN
FLAG 1328 880 0
FLAG 1328 720 V_OUT
FLAG 768 720 V_SCM
FLAG 688 1056 m*_p
FLAG 688 1104 m*_i
FLAG 976 1056 m*
FLAG 320 1104 V_SCM
FLAG 320 1056 v_scm*
FLAG 336 1408 i_scm
FLAG 320 1360 V_SCM
FLAG 448 1360 pw_scm
FLAG 912 1328 0
FLAG 1280 1248 v_scm*
FLAG 320 1520 0
FLAG 1024 1360 inc_dec
FLAG 1008 816 0
FLAG 1008 768 m*
SYMBOL voltage 240 752 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value PULSE(1000 200 30 0.2 0.2 30 60)
SYMBOL cap 864 768 R0
SYMATTR InstName C1
SYMATTR Value 100u
SYMBOL ind 1152 736 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 1m
SYMBOL Misc\\battery 1328 736 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL FerriteBead 832 720 R270
WINDOW 0 16 0 VTop 2
SYMATTR InstName L2
SYMATTR Value 1n
SYMBOL LTspiceControlLibrary\\Sources\\SolarCells 752 736 R0
WINDOW 3 -128 80 Invisible 2
SYMATTR Value Nser={Nser} Nper={Nper} S0={S0} Isc0={Isc0} Rser1={Rser1} Rper1={Rper1} Is={Is} Eg={Eg} N={N}
SYMATTR InstName U1
SYMBOL sub 352 1088 R0
SYMATTR InstName U21
SYMBOL Integral 624 1136 R0
WINDOW 123 0 28 Left 2
SYMATTR Value2 Y0={12/20}
SYMATTR Value T=10m
SYMATTR InstName U3
SYMBOL Proportional 480 1088 R0
SYMATTR Value K=0.1
SYMATTR InstName U4
SYMBOL add 736 1088 R0
SYMATTR InstName U5
SYMBOL LTspiceControlLibrary\\Math\\Operands\\neg 416 1088 R0
SYMATTR InstName U6
SYMBOL LTspiceControlLibrary\\Math\\Functions\\limit 832 1088 R0
SYMATTR Value y=0 z=1
SYMATTR InstName U7
SYMBOL LTspiceControlLibrary\\Math\\Operands\\sub 560 1136 R0
SYMATTR InstName U8
SYMBOL LTspiceControlLibrary\\Math\\Operands\\sub 832 1088 M90
SYMATTR InstName U9
SYMBOL LTspiceControlLibrary\\Math\\Operands\\mul 368 1392 R0
SYMATTR InstName U10
SYMBOL LTspiceControlLibrary\\Math\\Functions\\if 1056 1296 R0
SYMATTR InstName U11
SYMBOL LTspiceControlLibrary\\Math\\Operands\\add 1136 1280 R0
SYMATTR InstName U12
SYMBOL LTspiceControlLibrary\\Math\\Operands\\neg 992 1296 R0
SYMATTR InstName U13
SYMBOL voltage 912 1232 R0
SYMATTR InstName V3
SYMATTR Value {Vpo}
SYMBOL LTspiceControlLibrary\\TransferFunctions\\1stOrderLag 496 1392 R0
SYMATTR Value K=1 T={0.3*Tpo}
SYMATTR InstName U14
SYMBOL LTspiceControlLibrary\\Math\\Operands\\xor_op 944 1392 R0
SYMATTR InstName U15
SYMBOL LTspiceControlLibrary\\Math\\Operands\\lt 864 1392 R0
SYMATTR InstName U16
SYMBOL bv 320 1424 R0
SYMATTR InstName B1
SYMATTR Value V=I(L2)
SYMBOL LTspiceControlLibrary\\Discrete\\ZeroOrderHold 688 1392 R0
SYMATTR Value T={Tpo}
SYMATTR InstName U17
SYMBOL LTspiceControlLibrary\\Discrete\\UnitDelay 816 1440 R0
SYMATTR Value T={Tpo}
SYMATTR InstName U18
SYMBOL LTspiceControlLibrary\\Discrete\\UnitDelay 1024 1440 M0
WINDOW 3 32 0 Right 2
SYMATTR Value T={Tpo}
SYMATTR InstName U19
SYMBOL LTspiceControlLibrary\\Discrete\\UnitDelay 1216 1328 M0
WINDOW 3 32 0 Right 2
WINDOW 123 32 28 Right 2
SYMATTR Value T={Tpo}
SYMATTR Value2 Y0=20
SYMATTR InstName U20
SYMBOL LTspiceControlLibrary\\Sources\\DCTransformer 1056 736 R0
SYMATTR InstName U2
TEXT 712 424 Left 2 !** solar cell paramteres\n.param Nser=36 Nper=1\n.param S0=1000 Isc0=1\n.param Rser1=10m Rper1=1k\n.param Is=10n Eg=1.11 N=1.2
TEXT 192 440 Left 2 !.tran 100
TEXT 192 472 Left 2 !.model SW SW(Ron=.1 Roff=1Meg Vt=0.5)\n.model D D(Ron=.1 Roff=1Meg Vfwd=.7)
TEXT 168 584 Left 4 ;Circuit
TEXT 160 936 Left 4 ;Controller
TEXT 168 392 Left 4 ;Config
TEXT 128 272 Left 5 ;Solar Cell Maximum-Power-Point-Tracking\nUsing Perturb and Observe Method
TEXT 240 984 Left 2 ;solar cells\nvoltage controller
TEXT 376 1240 Left 2 !** p&o method parameters\n.param Tpo=1 Vpo=0.2
TEXT 240 1192 Left 2 ;perturb and observe method
TEXT 248 648 Left 2 ;light intensity
TEXT 1280 648 Left 2 ;battery
TEXT 1016 648 Left 2 ;buck converter
TEXT 688 648 Left 2 ;solar cells
TEXT 1080 408 Left 2 ;NOTE\nSwitching elements are approximated\nby imaginary variable dc transformers.\nThis reduces transient analysis time.\nDiscontinuous conduction mode and\nnonconduction mode are NOT considered.
