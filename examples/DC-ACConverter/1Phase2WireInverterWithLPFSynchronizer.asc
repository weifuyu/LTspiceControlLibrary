Version 4
SHEET 1 1304 1156
WIRE -1968 -1024 -2208 -1024
WIRE -1712 -1024 -1968 -1024
WIRE -1968 -992 -1968 -1024
WIRE -1888 -992 -1968 -992
WIRE -1712 -992 -1712 -1024
WIRE -1632 -992 -1712 -992
WIRE -1968 -976 -1968 -992
WIRE -1888 -976 -1888 -992
WIRE -1712 -976 -1712 -992
WIRE -1632 -976 -1632 -992
WIRE -1968 -880 -1968 -896
WIRE -1888 -880 -1888 -912
WIRE -1888 -880 -1968 -880
WIRE -1712 -880 -1712 -896
WIRE -1632 -880 -1632 -912
WIRE -1632 -880 -1712 -880
WIRE -1968 -832 -1968 -880
WIRE -1472 -832 -1968 -832
WIRE -1360 -832 -1472 -832
WIRE -1088 -832 -1280 -832
WIRE -1008 -832 -1088 -832
WIRE -1008 -816 -1008 -832
WIRE -2208 -768 -2208 -1024
WIRE -1008 -720 -1008 -736
WIRE -1008 -720 -1056 -720
WIRE -1008 -704 -1008 -720
WIRE -1712 -624 -1712 -880
WIRE -1472 -624 -1712 -624
WIRE -1360 -624 -1472 -624
WIRE -1088 -624 -1280 -624
WIRE -1008 -624 -1088 -624
WIRE -1968 -576 -1968 -832
WIRE -1888 -576 -1968 -576
WIRE -1712 -576 -1712 -624
WIRE -1632 -576 -1712 -576
WIRE -1968 -560 -1968 -576
WIRE -1712 -560 -1712 -576
WIRE -1888 -544 -1888 -576
WIRE -1632 -544 -1632 -576
WIRE -1968 -464 -1968 -480
WIRE -1888 -464 -1888 -480
WIRE -1888 -464 -1968 -464
WIRE -1712 -464 -1712 -480
WIRE -1632 -464 -1632 -480
WIRE -1632 -464 -1712 -464
WIRE -2208 -432 -2208 -688
WIRE -1968 -432 -1968 -464
WIRE -1968 -432 -2208 -432
WIRE -1712 -432 -1712 -464
WIRE -1712 -432 -1968 -432
WIRE -2208 -400 -2208 -432
WIRE -960 -256 -976 -256
WIRE -2192 -240 -2208 -240
WIRE -2128 -240 -2192 -240
WIRE -1904 -240 -2032 -240
WIRE -1856 -240 -1904 -240
WIRE -1712 -240 -1728 -240
WIRE -1472 -240 -1488 -240
WIRE -1328 -240 -1344 -240
WIRE -1312 -240 -1328 -240
WIRE -1200 -240 -1248 -240
WIRE -1136 -240 -1200 -240
WIRE -960 -224 -976 -224
WIRE -1824 -208 -1840 -208
WIRE -1440 -208 -1456 -208
WIRE -1280 -192 -1280 -208
WIRE -1280 -192 -1296 -192
WIRE -960 -192 -976 -192
WIRE -1856 -176 -1920 -176
WIRE -1760 -176 -1760 -208
WIRE -1760 -176 -1792 -176
WIRE -1472 -176 -1488 -176
WIRE -1376 -176 -1376 -208
WIRE -1376 -176 -1408 -176
WIRE -1248 -176 -1248 -240
WIRE -1232 -176 -1248 -176
WIRE -1136 -176 -1168 -176
WIRE -960 -160 -976 -160
WIRE -1824 -144 -1840 -144
WIRE -1440 -144 -1456 -144
WIRE -2208 -128 -2208 -240
WIRE -960 -128 -976 -128
WIRE -2064 -112 -2080 -112
WIRE -1920 -112 -1920 -176
WIRE -1920 -112 -1936 -112
WIRE -1856 -112 -1920 -112
WIRE -1712 -112 -1728 -112
WIRE -1136 -112 -1168 -112
WIRE -1168 -96 -1168 -112
WIRE -960 -96 -976 -96
WIRE -2032 -80 -2048 -80
WIRE -1824 -80 -1840 -80
WIRE -2064 -48 -2080 -48
WIRE -1968 -48 -1968 -80
WIRE -1968 -48 -2000 -48
WIRE -1904 -48 -1904 -240
WIRE -1856 -48 -1904 -48
WIRE -1760 -48 -1760 -80
WIRE -1760 -48 -1792 -48
WIRE -2032 -16 -2048 -16
WIRE -1824 -16 -1840 -16
WIRE -2080 112 -2096 112
WIRE -2064 112 -2080 112
WIRE -1824 112 -2064 112
WIRE -1520 112 -1824 112
WIRE -1392 112 -1456 112
WIRE -1184 112 -1216 112
WIRE -1168 112 -1184 112
WIRE -1088 112 -1104 112
WIRE -1008 112 -1024 112
WIRE -928 112 -1008 112
WIRE -896 112 -928 112
WIRE -2128 144 -2160 144
WIRE -2064 144 -2064 112
WIRE -2032 144 -2064 144
WIRE -1952 160 -1968 160
WIRE -1840 160 -1856 160
WIRE -1472 160 -1840 160
WIRE -1392 160 -1408 160
WIRE -1216 160 -1216 112
WIRE -1008 160 -1008 112
WIRE -928 160 -944 160
WIRE -864 160 -864 144
WIRE -864 160 -928 160
WIRE -2032 176 -2064 176
WIRE -2000 208 -2016 208
WIRE -1824 224 -1824 112
WIRE -1808 224 -1824 224
WIRE -1680 224 -1728 224
WIRE -2064 240 -2064 176
WIRE -1600 240 -1616 240
WIRE -1488 240 -1488 144
WIRE -1488 240 -1504 240
WIRE -1392 240 -1488 240
WIRE -1680 256 -1712 256
WIRE -1648 288 -1664 288
WIRE -1184 304 -1216 304
WIRE -1168 304 -1184 304
WIRE -1088 304 -1104 304
WIRE -1008 304 -1024 304
WIRE -928 304 -1008 304
WIRE -896 304 -928 304
WIRE -768 304 -832 304
WIRE -1840 336 -1840 160
WIRE -1808 336 -1840 336
WIRE -1680 336 -1728 336
WIRE -1600 352 -1616 352
WIRE -1440 352 -1440 192
WIRE -1440 352 -1504 352
WIRE -1216 352 -1216 304
WIRE -1008 352 -1008 304
WIRE -928 352 -944 352
WIRE -864 352 -864 336
WIRE -864 352 -928 352
WIRE -1712 368 -1712 256
WIRE -1680 368 -1712 368
WIRE -1648 400 -1664 400
WIRE -2048 416 -2064 416
WIRE -2064 432 -2064 416
WIRE -1712 432 -1712 368
FLAG -2208 -400 0
FLAG -2016 -960 UP
FLAG -2016 -912 0
FLAG -2016 -544 UN
FLAG -2016 -496 0
FLAG -1760 -960 VP
FLAG -1760 -912 0
FLAG -1760 -544 VN
FLAG -1760 -496 0
FLAG -2208 -1024 DC_P
FLAG -960 -256 UP
FLAG -960 -160 VN
FLAG -960 -224 UN
FLAG -960 -192 VP
FLAG -960 -96 WN
FLAG -960 -128 WP
FLAG -2208 -48 0
FLAG -2192 -240 il1
FLAG -1712 -240 ip
FLAG -1712 -112 iq
FLAG -1184 112 ip*
FLAG -928 112 vp*_p
FLAG -928 160 vp*_i
FLAG -1136 144 ip
FLAG -1216 240 0
FLAG -768 112 vp*
FLAG -1184 304 iq*
FLAG -928 304 vq*_p
FLAG -928 352 vq*_i
FLAG -1136 336 iq
FLAG -1216 432 0
FLAG -768 304 vq*
FLAG -1488 -240 vp*
FLAG -1488 -176 vq*
FLAG -1296 -192 DC_P
FLAG -1328 -240 v*
FLAG -1088 -832 AC_L1
FLAG -1088 -624 AC_L2
FLAG -1056 -720 AC_N
FLAG -800 144 vp_ac
FLAG -1200 -240 m*
FLAG -2064 512 0
FLAG -2064 416 init
FLAG -2016 208 init
FLAG -2064 320 0
FLAG -1664 288 init
FLAG -1664 400 init
FLAG -1712 512 0
FLAG -2160 112 AC_L1
FLAG -2160 144 AC_L2
FLAG -1168 -96 0
FLAG -1472 -832 INV_L1
FLAG -1472 -624 INV_L2
FLAG -1392 112 cospe
FLAG -1392 160 sinpe
FLAG -1392 240 vp_ac
FLAG -1456 -208 cospe
FLAG -1456 -144 sinpe
FLAG -2080 -112 iq*
FLAG -2080 -48 ip*
FLAG -2048 -80 cospe
FLAG -2048 -16 sinpe
FLAG -1840 -208 cospe
FLAG -1840 -144 sinpe
FLAG -1840 -80 cospe
FLAG -1840 -16 sinpe
FLAG -2080 112 vac
SYMBOL voltage -2208 -784 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 350
SYMBOL diode -1904 -912 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL ind -1376 -816 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value {Lfilter}
SYMBOL sw -1968 -880 M180
SYMATTR InstName S1
SYMBOL sw -1968 -464 M180
SYMATTR InstName S2
SYMBOL sw -1712 -880 M180
SYMATTR InstName S3
SYMBOL sw -1712 -464 M180
SYMATTR InstName S4
SYMBOL diode -1904 -480 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMBOL diode -1648 -912 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMBOL diode -1648 -480 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMBOL ind -1376 -608 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value {Lfilter}
SYMBOL 3PhaseComplementaryPWM -1136 -304 R0
WINDOW 123 8 265 Left 2
SYMATTR Value2 Tdelay=0 tripdt=100m*Tdead
SYMATTR InstName U1
SYMBOL bv -2208 -144 R0
SYMATTR InstName B1
SYMATTR Value V=I(L1)
SYMBOL sub -1152 144 R0
SYMATTR InstName U7
SYMBOL Integral -992 192 R0
SYMATTR Value T=1m
SYMATTR InstName U8
SYMBOL Proportional -1072 144 R0
SYMATTR Value K=5
SYMATTR InstName U10
SYMBOL add -880 144 R0
SYMATTR InstName U11
SYMBOL voltage -1216 144 R0
SYMATTR InstName V7
SYMATTR Value PULSE(0 {10*sqrt(2)} 0 1n 1n 1G)
SYMBOL sub -1152 336 R0
SYMATTR InstName U12
SYMBOL Integral -992 384 R0
SYMATTR Value T=1m
SYMATTR InstName U13
SYMBOL Proportional -1072 336 R0
SYMATTR Value K=5
SYMATTR InstName U14
SYMBOL add -880 336 R0
SYMATTR InstName U15
SYMBOL voltage -1216 336 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V8
SYMATTR Value PULSE(0 {3*sqrt(2)} 0 1n 1n 1G)
SYMBOL TransferFunctions\\1stOrderLag -2112 -208 R0
SYMATTR Value K=1 T=50u
SYMATTR InstName U27
SYMBOL add -816 144 R0
SYMATTR InstName U29
SYMBOL voltage -1008 -832 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value SINE(0 {Vac/2} {Fac})
SYMBOL voltage -1008 -720 R0
SYMATTR InstName V3
SYMATTR Value SINE(0 {Vac/2} {Fac})
SYMBOL TransferFunctions\\1stOrderLag -1936 192 R0
SYMATTR Value K=100 T=K*{1/(2*pi*50)}
SYMATTR InstName U5
SYMBOL TransferFunctions\\1stOrderLag -1584 272 R0
SYMATTR Value K={pi/2} T=0.3
SYMATTR InstName U21
SYMBOL TransferFunctions\\1stOrderLag -1584 384 R0
SYMATTR Value K={pi/2} T=0.3
SYMATTR InstName U22
SYMBOL Math\\Functions\\abs -1792 256 R0
SYMATTR InstName U23
SYMBOL Math\\Functions\\abs -1792 368 R0
SYMATTR InstName U24
SYMBOL Math\\Functions\\if -2016 208 R0
SYMATTR InstName U26
SYMBOL voltage -2064 416 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value PULSE(0 1 0 1n 1n 1G)
SYMBOL voltage -2064 224 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V5
SYMATTR Value {-Vac/100}
SYMBOL Math\\Functions\\if -1664 288 R0
SYMATTR InstName U37
SYMBOL Math\\Functions\\if -1664 400 R0
SYMATTR InstName U38
SYMBOL voltage -1712 416 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value {Vac*2/pi}
SYMBOL Math\\Operands\\sub -2144 144 R0
SYMATTR InstName U30
SYMBOL Math\\Operands\\neg -1216 -144 R0
SYMATTR InstName U2
SYMBOL Math\\Operands\\div -1456 192 R0
SYMATTR InstName U9
SYMBOL Math\\Operands\\div -1504 144 R0
SYMATTR InstName U17
SYMBOL Math\\Operands\\mul -1456 -208 R0
SYMATTR InstName U4
SYMBOL Math\\Operands\\mul -1456 -144 R0
SYMATTR InstName U6
SYMBOL Math\\Operands\\sub -1392 -208 R0
SYMATTR InstName U16
SYMBOL Math\\Operands\\mul -2048 -80 R0
SYMATTR InstName U19
SYMBOL Math\\Operands\\mul -2048 -16 R0
SYMATTR InstName U20
SYMBOL Math\\Operands\\add -1984 -80 R0
SYMATTR InstName U25
SYMBOL Math\\Operands\\mul -1840 -208 R0
SYMATTR InstName U28
SYMBOL Math\\Operands\\mul -1840 -144 R0
SYMATTR InstName U32
SYMBOL Math\\Operands\\sub -1776 -80 R0
SYMATTR InstName U33
SYMBOL Math\\Operands\\mul -1840 -80 R0
SYMATTR InstName U34
SYMBOL Math\\Operands\\mul -1840 -16 R0
SYMATTR InstName U35
SYMBOL Math\\Operands\\add -1776 -208 R0
SYMATTR InstName U36
SYMBOL Math\\Operands\\div -1296 -208 R0
SYMATTR InstName U3
TEXT -2216 -1184 Left 2 !.tran 40m
TEXT -2216 -1152 Left 2 !.model SW SW(Ron=1 Roff=1Meg Vt=0.5)\n.model D D(Ron=.1 Roff=1Meg Vfwd=.4)
TEXT -1080 -288 Left 2 ;PWM
TEXT -2208 -288 Left 2 ;sensor
TEXT -1376 -888 Left 2 !.param Lfilter=1m
TEXT -2256 -1224 Left 4 ;Config
TEXT -2296 -1280 Left 5 ;Single-Phase Two-Wire Inverter with LPF Synchronizer
TEXT -2256 -1088 Left 4 ;Circuit
TEXT -2248 -328 Left 4 ;Controller
TEXT -1504 -456 Left 2 ;NOTE:\nIf you want to simulate the dead time of gate signals with accuracy,\nset maximum timestep of transient analysis below the dead time\nor set the parameter 'tripdt' of PWM below the dead time.\nSmaller value brings more accurate but slower simulation.
TEXT -1232 56 Left 2 ;current controller
TEXT -1728 -288 Left 2 ;coordinate transformation
TEXT -1880 72 Left 2 ;LPF synchronizer
TEXT -1088 -888 Left 2 !.param Vac=200*sqrt(2) Fac=50
