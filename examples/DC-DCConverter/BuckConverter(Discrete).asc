Version 4
SHEET 1 3572 848
WIRE 560 32 432 32
WIRE 752 32 640 32
WIRE 800 32 752 32
WIRE 944 32 880 32
WIRE 1072 32 944 32
WIRE 432 64 432 32
WIRE 752 80 752 32
WIRE 944 80 944 32
WIRE 1072 80 1072 32
WIRE 432 208 432 144
WIRE 752 208 752 144
WIRE 752 208 432 208
WIRE 944 208 944 144
WIRE 944 208 752 208
WIRE 1072 208 1072 160
WIRE 1072 208 944 208
WIRE 432 224 432 208
WIRE 464 432 432 432
WIRE 544 432 464 432
WIRE 736 432 704 432
WIRE 848 432 800 432
WIRE 992 432 848 432
WIRE 1024 432 992 432
WIRE 1104 432 1088 432
WIRE 1120 432 1104 432
WIRE 432 480 432 432
WIRE 848 480 848 432
WIRE 992 480 976 480
WIRE 1040 480 992 480
WIRE 1056 480 1056 464
WIRE 1056 480 1040 480
WIRE 672 496 672 464
WIRE 672 496 640 496
WIRE 944 544 944 512
WIRE 960 544 944 544
WIRE 1040 544 1040 480
WIRE 1040 544 1024 544
FLAG 432 224 0
FLAG 576 80 X
FLAG 624 80 0
FLAG 432 32 IN
FLAG 1072 32 OUT
FLAG 1216 432 X
FLAG 432 560 0
FLAG 544 496 OUT
FLAG 464 432 v*
FLAG 992 432 m*_p
FLAG 992 480 m*_i
FLAG 1104 432 m*
SYMBOL voltage 432 48 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 10
SYMBOL cap 928 80 R0
SYMATTR InstName C1
SYMATTR Value 10u
SYMBOL diode 768 144 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL res 1056 64 R0
SYMATTR InstName R1
SYMATTR Value 100
SYMBOL ind 784 48 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 10m
SYMBOL sw 656 32 M270
SYMATTR InstName S1
SYMBOL voltage 432 464 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value PULSE(0 5 0 5m 5m 1G)
SYMBOL sub 656 464 R0
SYMATTR InstName U1
SYMBOL Proportional 752 464 R0
SYMATTR InstName U4
SYMATTR Value K=10m
SYMBOL add 1040 464 R0
SYMATTR InstName U5
SYMBOL PulseModulations\\PWM 1136 464 R0
SYMATTR Value Vin1=0 Vin2=1 Tperiod={1/10k}
SYMATTR InstName U3
SYMBOL Discrete\\ZeroOrderHold 560 464 R0
SYMATTR Value T={Tds}
SYMATTR InstName U6
SYMBOL Discrete\\ZeroOrderHold 560 528 R0
SYMATTR Value T={Tds}
SYMATTR InstName U7
SYMBOL Proportional 864 512 R0
SYMATTR InstName U2
SYMATTR Value K={Tds/1m}
SYMBOL Math\\Operands\\add 928 512 R0
SYMATTR InstName U8
SYMBOL Discrete\\UnitDelay 1008 576 M0
WINDOW 3 32 0 Right 2
SYMATTR Value T={Tds}
SYMATTR InstName U9
TEXT 408 -200 Left 2 !.tran 0 100m 0 startup
TEXT 408 -168 Left 2 !.model SW SW(Ron=1 Roff=1Meg Vt=0.5)\n.model D D(Ron=.1 Roff=1Meg Vfwd=.4)
TEXT 352 328 Left 4 ;Controller
TEXT 424 376 Left 2 ;voltage controller
TEXT 360 -248 Left 4 ;Config
TEXT 320 -304 Left 5 ;Buck Converter
TEXT 360 -88 Left 4 ;Circuit
TEXT 648 376 Left 2 !.param Tds=1/10k
