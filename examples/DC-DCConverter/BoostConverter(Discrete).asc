Version 4
SHEET 1 976 680
WIRE -928 -304 -1056 -304
WIRE -720 -304 -848 -304
WIRE -640 -304 -720 -304
WIRE -496 -304 -576 -304
WIRE -384 -304 -496 -304
WIRE -1056 -272 -1056 -304
WIRE -720 -256 -720 -304
WIRE -496 -256 -496 -304
WIRE -384 -256 -384 -304
WIRE -1056 -128 -1056 -192
WIRE -720 -128 -720 -176
WIRE -720 -128 -1056 -128
WIRE -496 -128 -496 -192
WIRE -496 -128 -720 -128
WIRE -384 -128 -384 -176
WIRE -384 -128 -496 -128
WIRE -1056 -112 -1056 -128
WIRE -1040 80 -1056 80
WIRE -816 80 -1040 80
WIRE -704 80 -720 80
WIRE -624 80 -640 80
WIRE -544 80 -560 80
WIRE -368 80 -544 80
WIRE -352 80 -368 80
WIRE -240 80 -288 80
WIRE 0 80 -240 80
WIRE 80 80 64 80
WIRE 160 80 144 80
WIRE 336 80 160 80
WIRE 352 80 336 80
WIRE 448 80 416 80
WIRE 464 80 448 80
WIRE -544 128 -544 80
WIRE -528 128 -544 128
WIRE -368 128 -400 128
WIRE -336 128 -368 128
WIRE -320 128 -320 112
WIRE -320 128 -336 128
WIRE -240 128 -256 128
WIRE -224 128 -240 128
WIRE -80 128 -128 128
WIRE 32 128 32 112
WIRE 32 128 16 128
WIRE 160 128 160 80
WIRE 176 128 160 128
WIRE 336 128 304 128
WIRE 368 128 336 128
WIRE 384 128 384 112
WIRE 384 128 368 128
WIRE -816 144 -864 144
WIRE -672 144 -672 112
WIRE -672 144 -720 144
WIRE 496 176 496 112
WIRE -1056 192 -1056 80
WIRE -432 192 -432 160
WIRE -416 192 -432 192
WIRE -336 192 -336 128
WIRE -336 192 -352 192
WIRE -256 192 -256 128
WIRE 272 192 272 160
WIRE 288 192 272 192
WIRE 368 192 368 128
WIRE 368 192 352 192
FLAG -1056 -112 0
FLAG -768 -240 X
FLAG 528 80 X
FLAG 496 256 0
FLAG -768 -192 0
FLAG -384 -304 OUT
FLAG -1056 272 0
FLAG -960 144 OUT
FLAG -1040 80 v*
FLAG -1056 -304 IN
FLAG -368 80 il*_p
FLAG -368 128 il*_i
FLAG -240 80 il*
FLAG 336 80 m*_p
FLAG 336 128 m*_i
FLAG 448 80 m*
FLAG -256 272 0
FLAG -240 128 il
SYMBOL voltage -1056 -288 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 10
SYMBOL cap -512 -256 R0
SYMATTR InstName C1
SYMATTR Value 100u
SYMBOL diode -640 -288 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMBOL res -400 -272 R0
SYMATTR InstName R1
SYMATTR Value 100
SYMBOL ind -944 -288 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 10m
SYMBOL sw -720 -160 M180
SYMATTR InstName S1
SYMBOL voltage -1056 176 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value PULSE(10 20 0 5m 5m 1G)
SYMBOL sub -688 112 R0
SYMATTR InstName U1
SYMBOL gt 480 112 R0
SYMATTR InstName U4
SYMBOL Proportional -608 112 R0
SYMATTR Value K=0.1
SYMATTR InstName U5
SYMBOL add -336 112 R0
SYMATTR InstName U6
SYMBOL sub 16 112 R0
SYMATTR InstName U7
SYMBOL Proportional 96 112 R0
SYMATTR Value K=10
SYMATTR InstName U9
SYMBOL add 368 112 R0
SYMATTR InstName U10
SYMBOL bv -256 176 R0
SYMATTR InstName B1
SYMATTR Value V=I(L1)
SYMBOL 1stOrderLag -208 160 R0
SYMATTR Value K=1 T=0.1m
SYMATTR InstName U11
SYMBOL TriangleWaveVoltage 496 160 R0
SYMATTR InstName U3
SYMATTR Value V1=0 V2=1 Tperiod={1/10k} tratio=1
SYMBOL Discrete\\ZeroOrderHold -800 176 R0
SYMATTR Value T={Tdsv}
SYMATTR InstName U12
SYMBOL Discrete\\UnitDelay -368 224 M0
WINDOW 3 32 0 Right 2
SYMATTR Value T={Tdsv}
SYMATTR InstName U13
SYMBOL Discrete\\ZeroOrderHold -64 160 R0
SYMATTR Value T={Tdsi}
SYMATTR InstName U14
SYMBOL Discrete\\UnitDelay 336 224 M0
WINDOW 3 32 0 Right 2
SYMATTR Value T={Tdsi}
SYMATTR InstName U15
SYMBOL Proportional -512 160 R0
SYMATTR Value K={Tdsv/10m}
SYMATTR InstName U2
SYMBOL Proportional 192 160 R0
SYMATTR Value K={Tdsi/1m}
SYMATTR InstName U8
SYMBOL add -448 160 R0
SYMATTR InstName U16
SYMBOL add 256 160 R0
SYMATTR InstName U17
SYMBOL 1stOrderLag -944 176 R0
SYMATTR Value K=1 T=0.1m
SYMATTR InstName U18
SYMBOL Discrete\\ZeroOrderHold -800 112 R0
SYMATTR Value T={Tdsv}
SYMATTR InstName U19
TEXT -1104 -520 Left 2 !.tran 0 100m 0 startup
TEXT -1104 -488 Left 2 !.model SW SW(Ron=1 Roff=1Meg Vt=0.5)\n.model D D(Ron=.1 Roff=1Meg Vfwd=.4)
TEXT -1128 -376 Left 4 ;Circuit
TEXT -1136 -24 Left 4 ;Controller
TEXT -1104 -432 Left 2 !.ic V(OUT)=10
TEXT -1064 24 Left 2 ;voltage controller
TEXT -280 24 Left 2 ;current controller
TEXT 392 24 Left 2 ;PWM
TEXT -1128 -568 Left 4 ;Config
TEXT -1168 -624 Left 5 ;Boost Converter
TEXT -816 24 Left 2 !.param Tdsv=3/10k
TEXT -48 24 Left 2 !.param Tdsi=1/10k
